---
title: "17: Software Design Patterns"
last_modified_at: 2022-05-27T08:20:02-05:00
author: Lukas Holler
categories:
  - Blog
tags:
  - design
  - pattern
  - observer
  - subject
  - typescript
---

Hola señores y señoritas,

[bienvenido a una nueva publicación](https://www.google.com/search?q=bienvenido+a+una+nueva+publicaci%C3%B3n+translation)!

Within the last 2 weeks we were doing research on different software design patterns that could improve our DHBW-Experts-App. Since the code of our backend is largely auto-generated by C-Sharps database-first approach, we decided to take a deeper look into our frontend instead.

For the last couple of weeks, every page of our frontend stored its own individual user object which manually had to be fetched from our backend every time you either reload or navigate through our application. To solve this very inefficient temporary approach, we decided to implement a new service-singleton called UserState which also contains an observable which represents whether user information is available or if it has to be fetched. This software design pattern is called the observer pattern.

# The Observer Pattern

The observer pattern is a software design pattern in which an object, named the subject or observable, maintains a list of subscribers that can be automatically notified of any state changes all at once. This design pattern is mostly used in event-driven applications. By subscribing to different observables throughout the application, the subscriber is enabled to react to events without having to actively poll for state changes.

# How we realized it

The first thing we did, was implementing a new angular service which is available everywhere in the app. By declaring the service as a singleton there is always only exactly one instance of the class, no matter how often you initialize it in any constructor. Doing that ensures that all the variables declared in the service are shared with the whole app. Furthermore, the UserState-service we created contains a method called “fetchUserInfo”. This method is responsible for fetching the updated info of the logged in user. Calling the method causes the isUserInfoAvailable-subject to emit the value false to all its subscribers meaning that a http-request is currently running. As soon as the data is fetched, the method subject emits the value true, notifying all subscribers that the service successfully fetched the user-info. 

![fetchUserInfo Method](/assets/images/user-state-fetchUserInfo.png)

All the commits we pushed to implement this feature are contained in this [Pull-Request](https://github.com/DHBW-Experts/app/pull/32).
